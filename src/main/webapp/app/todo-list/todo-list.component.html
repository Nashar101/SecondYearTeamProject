<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-do List</title>
  </head>
  <body>
    <h1>To-do List</h1>
    <div class="todo-list">
      <div class="todo-items">
        <span class="title">to-dos</span>
        <div class="window">
          <ul class="list" id="todo-list">
            <li class="item" *ngFor="let item of todoItems" role="listitem">
              <input type="checkbox" tabindex="0" (click)="moveItem($event, item)" (keydown)="handleCheckboxKeydown($event, item)" />
              <span
                tabindex="0"
                (click)="showDetails(item)"
                (keydown)="handleTextKeydown($event, item)"
                [ngClass]="{ selected: selectedItem === item }"
              >
                {{ item.heading }}
              </span>
            </li>
          </ul>
        </div>
      </div>
      <div class="empty-space"></div>
      <div class="done-items">
        <span class="title">dones</span>
        <div class="window">
          <ul class="list" id="done-list">
            <li class="item" *ngFor="let item of doneItems" role="listitem">
              <input
                type="checkbox"
                tabindex="0"
                (click)="moveItem($event, item)"
                (keydown)="handleCheckboxKeydown($event, item)"
                [checked]="item.completed"
              />
              <span
                tabindex="0"
                (click)="showDetails(item)"
                (keydown)="handleTextKeydown($event, item)"
                [ngClass]="{ selected: selectedItem === item }"
              >
                {{ item.heading }}
              </span>
            </li>
          </ul>
        </div>
      </div>
      <div class="empty-space"></div>
      <div class="Detail-Window" *ngIf="selectedItem">
        <button class="close-button" tabindex="0" (click)="closeDetailWindow()" aria-label="Close the detail window">&times;</button>
        <div>
          <label for="detail-heading">Heading</label>
          <textarea
            id="detail-heading"
            class="Detail-Heading"
            placeholder="Heading"
            [ngModel]="selectedItem.heading"
            (ngModelChange)="updateHeading($event)"
          ></textarea>
        </div>
        <div>
          <label for="detail-description">Description</label>
          <textarea
            id="detail-description"
            class="Detail-Description"
            rows="6"
            placeholder="Description"
            [ngModel]="selectedItem.description"
            (ngModelChange)="updateDescription($event)"
          ></textarea>
        </div>
        <div>
          <p>Created: {{ selectedItem.creationTime }}</p>
          <p>Last Edited: {{ selectedItem.lastEditTime }}</p>
        </div>
        <button (click)="saveChanges()" tabindex="0" type="button" aria-label="Save changes">Save</button>
        <button (click)="cancelChanges()" tabindex="0" type="button" aria-label="Cancel changes">Cancel</button>
      </div>
    </div>
    <button class="delete-button" tabindex="0" (click)="deleteItem()" aria-label="Delete the chosen item">
      <span class="delete-button-icon">-</span>
    </button>
    <button class="add-button" tabindex="0" (click)="createNewItem()" aria-label="Add a new item">
      <span class="add-button-icon">+</span>
    </button>
    <div class="empty-space"></div>
  </body>
</html>
